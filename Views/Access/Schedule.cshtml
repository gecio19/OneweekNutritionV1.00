@model List<Tuple<string,Recipe>>




@{
    DayOfWeek currentDay = DateTime.Now.DayOfWeek;
    int daysTillCurrentDay = currentDay - DayOfWeek.Monday;
    DateTime currentWeekStartDate = DateTime.Now.AddDays(-daysTillCurrentDay);
}



<button onclick="changeWeek()">
    Next Week
</button>



<div class="container">
    <div class="timetable-img text-center">
        <img Wednesdayc="img/content/timetable.Mondayg" alt="">
    </div>
    <div class="table-responsive">
        <table class="table table-bordered text-center">
            <thead>
                <tr class="bg-light-gray">
                    <th class="text-uppercase">
                        Time
                    </th>

                    <th class="text-uppercase" id="I @currentWeekStartDate.ToString().Substring(0,5)">

                        Monday
                        <br />
                        @currentWeekStartDate.ToString().Substring(0,5)
                    
                    </th>

                    <th class="text-uppercase" id="I @currentWeekStartDate.AddDays(1).ToString().Substring(0,5)">
                        Tuesday
                        <br />
                        @currentWeekStartDate.AddDays(1).ToString().Substring(0,5)
                    </th>

                    <th class="text-uppercase" id="I @currentWeekStartDate.AddDays(2).ToString().Substring(0,5)">
                        Wednesday
                        <br />
                        @currentWeekStartDate.AddDays(2).ToString().Substring(0,5)
                    </th>

                    <th class="text-uppercase" id="I @currentWeekStartDate.AddDays(3).ToString().Substring(0,5)">
                        Thursday
                        <br />
                        @currentWeekStartDate.AddDays(3).ToString().Substring(0,5)
                    </th>

                    <th class="text-uppercase" id="I @currentWeekStartDate.AddDays(4).ToString().Substring(0,5)">
                        Friday
                        <br />
                        @currentWeekStartDate.AddDays(4).ToString().Substring(0,5)
                    </th>

                    <th class="text-uppercase" id="I @currentWeekStartDate.AddDays(5).ToString().Substring(0,5)">
                        Saturday
                        <br />
                        @currentWeekStartDate.AddDays(5).ToString().Substring(0,5)
                    </th>

                    <th class="text-uppercase" id="I @currentWeekStartDate.AddDays(6).ToString().Substring(0,5)">
                        Sunday
                        <br />
                        @currentWeekStartDate.AddDays(6).ToString().Substring(0,5)
                    </th>

                   

                </tr>
            </thead>
            <tbody>

                <tr>
                    <td class="align-middle">09:00</td>

                    <td id="Monday9">
                    </td>
                    <td id="Tuesday9">
                    </td>

                    <td id="Wednesday9">
                    </td>
                    <td id="Thursday9">
                    </td>
                    <td id="Friday9">
                    </td>
                    <td id="Saturday9">
                    </td>

                    <td id="Sunday9">
                    </td>

                </tr>


                <tr>
                    <td class="align-middle">10:00</td>

                    <td id="Monday10">
                    </td>
                    <td id="Tuesday10">
                    </td>

                    <td id="Wednesday10">
                    </td>
                    <td id="Thursday10">
                    </td>
                    <td id="Friday10">
                    </td>
                    <td id="Saturday10">
                    </td>

                    <td id="Sunday10">
                    </td>
                </tr>


                <tr>
                    <td class="align-middle">11:00</td>

                    <td id="Monday11">
                    </td>
                    <td id="Tuesday11">
                    </td>

                    <td id="Wednesday11">
                    </td>
                    <td id="Thursday11">
                    </td>
                    <td id="Friday11">
                    </td>
                    <td id="Saturday11">
                    </td>

                    <td id="Sunday11">
                    </td>
                </tr>


                <tr>
                    <td class="align-middle">12:00</td>

                    <td id="Monday12">
                    </td>
                    <td id="Tuesday12">
                    </td>

                    <td id="Wednesday12">
                    </td>
                    <td id="Thursday12">
                    </td>
                    <td id="Friday12">
                    </td>
                    <td id="Saturday12">
                    </td>

                    <td id="Sunday12">
                    </td>
                </tr>

                <tr>
                    <td class="align-middle">13:00</td>

                    <td id="Monday13">
                    </td>
                    <td id="Tuesday13">
                    </td>

                    <td id="Wednesday13">
                    </td>
                    <td id="Thursday13">
                    </td>
                    <td id="Friday13">
                    </td>
                    <td id="Saturday13">
                    </td>

                    <td id="Sunday13">
                    </td>
                </tr>

                <tr>
                    <td class="align-middle">14:00</td>

                    <td id="Monday14">
                    </td>
                    <td id="Tuesday14">
                    </td>

                    <td id="Wednesday14">
                    </td>
                    <td id="Thursday14">
                    </td>
                    <td id="Friday14">
                    </td>
                    <td id="Saturday14">
                    </td>

                    <td id="Sunday14">
                    </td>
                </tr>


                <tr>
                    <td class="align-middle">15:00</td>

                    <td id="Monday15">
                    </td>
                    <td id="Tuesday15">
                    </td>

                    <td id="Wednesday15">
                    </td>
                    <td id="Thursday15">
                    </td>
                    <td id="Friday15">
                    </td>
                    <td id="Saturday15">
                    </td>

                    <td id="Sunday15">
                    </td>
                </tr>

                <tr>
                    <td class="align-middle">16:00</td>

                    <td id="Monday16">
                    </td>
                    <td id="Tuesday16">
                    </td>

                    <td id="Wednesday16">
                    </td>
                    <td id="Thursday16">
                    </td>
                    <td id="Friday16">
                    </td>
                    <td id="Saturday16">
                    </td>

                    <td id="Sunday16">
                    </td>
                </tr>

                <tr>
                    <td class="align-middle">17:00</td>

                    <td id="Monday17">
                    </td>
                    <td id="Tuesday17">
                    </td>

                    <td id="Wednesday17">
                    </td>
                    <td id="Thursday17">
                    </td>
                    <td id="Friday17">
                    </td>
                    <td id="Saturday17">
                    </td>

                    <td id="Sunday17">
                    </td>
                </tr>



                <tr>
                    <td class="align-middle">18:00</td>

                    <td id="Monday18">
                    </td>
                    <td id="Tuesday18">
                    </td>

                    <td id="Wednesday18">
                    </td>
                    <td id="Thursday18">
                    </td>
                    <td id="Friday18">
                    </td>
                    <td id="Saturday18">
                    </td>

                    <td id="Sunday18">
                    </td>
                </tr>

                <tr>
                    <td class="align-middle">19:00</td>

                    <td id="Monday19">
                    </td>
                    <td id="Tuesday19">
                    </td>

                    <td id="Wednesday19">
                    </td>
                    <td id="Thursday19">
                    </td>
                    <td id="Friday19">
                    </td>
                    <td id="Saturday19">
                    </td>

                    <td id="Sunday19">
                    </td>
                </tr>


                <tr>
                    <td class="align-middle">20:00</td>

                    <td id="Monday20">
                    </td>
                    <td id="Tuesday20">
                    </td>

                    <td id="Wednesday20">
                    </td>
                    <td id="Thursday20">
                    </td>
                    <td id="Friday20">
                    </td>
                    <td id="Saturday20">
                    </td>

                    <td id="Sunday20">
                    </td>
                </tr>


                <tr>
                    <td class="align-middle">21:00</td>

                    <td id="Monday21">
                    </td>
                    <td id="Tuesday21">
                    </td>

                    <td id="Wednesday21">
                    </td>
                    <td id="Thursday21">
                    </td>
                    <td id="Friday21">
                    </td>
                    <td id="Saturday21">
                    </td>

                    <td id="Sunday21">
                    </td>
                </tr>


                <tr>
                    <td class="align-middle">22:00</td>

                    <td id="Monday22">
                    </td>
                    <td id="Tuesday22">
                    </td>

                    <td id="Wednesday22">
                    </td>
                    <td id="Thursday22">
                    </td>
                    <td id="Friday22">
                    </td>
                    <td id="Saturday22">
                    </td>

                    <td id="Sunday22">
                    </td>
                </tr>

            </tbody>
        </table>
    </div>
</div>


<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/jquery/dist/jquery.js"></script>
<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="~/lib/jquery-validation/dist/jquery.validate.js"></script>







<style #Schedule>

    body {
        margin-top: 10px;
    }

    .bg-light-gray {
        background-color: #f7f7f7;
    }

    .table-bordered thead td, .table-bordered thead th {
        border-bottom-width: 2px;
    }

    .table thead th {
        vertical-align: bottom;
        border-bottom: 2px solid #dee2e6;
    }

    .table-bordered td, .table-bordered th {
        border: 1px solid #dee2e6;
    }


    .bg-sky.box-shadow {
        box-shadow: 0px 5px 0px 0px #00a2a7
    }

    .bg-orange.box-shadow {
        box-shadow: 0px 5px 0px 0px #af4305
    }

    .bg-green.box-shadow {
        box-shadow: 0px 5px 0px 0px #4ca520
    }

    .bg-yellow.box-shadow {
        box-shadow: 0px 5px 0px 0px #dcbf02
    }

    .bg-pink.box-shadow {
        box-shadow: 0px 5px 0px 0px #e82d8b
    }

    .bg-purple.box-shadow {
        box-shadow: 0px 5px 0px 0px #8343e8
    }

    .bg-lightred.box-shadow {
        box-shadow: 0px 5px 0px 0px #d84213
    }


    .bg-sky {
        background-color: #02c2c7
    }

    .bg-orange {
        background-color: #e95601
    }

    .bg-green {
        background-color: #5bbd2a
    }

    .bg-yellow {
        background-color: #f0d001
    }

    .bg-pink {
        background-color: #ff48a4
    }

    .bg-purple {
        background-color: #9d60ff
    }

    .bg-lightred {
        background-color: #ff5722
    }

    .padding-15px-lr {
        padding-left: 15px;
        padding-right: 15px;
    }

    .padding-5px-tb {
        padding-top: 5px;
        padding-bottom: 5px;
    }

    .margin-10px-bottom {
        margin-bottom: 10px;
    }

    .border-radius-5 {
        border-radius: 5px;
    }

    .margin-10px-top {
        margin-top: 10px;
    }

    .font-size14 {
        font-size: 14px;
    }

    .text-light-gray {
        color: #d6d5d5;
    }

    .font-size13 {
        font-size: 13px;
    }

    .table-bordered td, .table-bordered th {
        border: 1px solid #dee2e6;
    }

    .table td, .table th {
        padding: .75rem;
        vertical-align: top;
        border-top: 1px solid #dee2e6;
    }

</style>











<script>
    $(document).ready(function () {
        LoadPlan();

        if (document.cookie == '1')
        {
        UndoPlan();
        setTimeout(updateIds_next, 25);
        setTimeout(LoadPlan,50);

        }
    });




    function changeWeek()
    {
        if (document.cookie == '0') {
        UndoPlan();
        setTimeout(updateIds_next, 25);
        setTimeout(LoadPlan,50);
        document.cookie = 1;
        }
        else
        {
            UndoPlan();
            setTimeout(updateIds_back, 25);
            setTimeout(LoadPlan, 50);
            document.cookie = 0;
        }
        

    }

    function updateIds_next()
    {
        var tr = document.querySelector("body > div > main > div > div.table-responsive > table > thead > tr");
        for (let i = 1; i < 8; i++) {

            var pageId = tr.children[i].id.toString().split('.');
            var numId = Number(pageId[0].split(' ')[1]) + 7;

            var des = tr.children[i].innerHTML;
            var finalDes = des.replace(tr.children[i].id.toString().split(" ")[1], numId + '.' + pageId[1]);

            tr.children[i].innerHTML = finalDes;

            tr.children[i].id = "I " + numId + '.' + pageId[1];

        }


    }

    function updateIds_back() {
        var tr = document.querySelector("body > div > main > div > div.table-responsive > table > thead > tr");
        for (let i = 1; i < 8; i++) {

            var pageId = tr.children[i].id.toString().split('.');
            var numId = Number(pageId[0].split(' ')[1]) - 7;

            var des = tr.children[i].innerHTML;
            var finalDes = des.replace(tr.children[i].id.toString().split(" ")[1], numId + '.' + pageId[1]);

            tr.children[i].innerHTML = finalDes;

            tr.children[i].id = "I " + numId + '.' + pageId[1];

        }
    }



    function LoadPlan() {
        $.ajax({
            url: "/Access/SchedulItems",
            type: 'GET',
            success: function (result) {
                $.each(result, function (id, Recip) {
                  
                    result =
                        '<span class="bg-sky padding-5px-tb padding-15px-lr border-radius-5 margin-10px-bottom text-white font-size16 xs-font-size13">' + Recip.item2 + '</span>'


                    let podzialka = Recip.item3.toString().split('.');
                    let cos = "I\\ " + podzialka[0]+ "\\." + podzialka[1];


                    var el = document.querySelector("#" + cos);

                    
                    if(el != null){
                        $("#" + Recip.item1).html(result);
                    }
                });
            },
            error: function () {
                alert("COS zle");
            }
        });
    }


    function UndoPlan() {
        $.ajax({
            url: "/Access/SchedulItems",
            type: 'GET',
            success: function (result) {
               
                $.each(result, function (id, Recip) {
                  
                    result =
                        '<span class="bg-sky padding-5px-tb padding-15px-lr border-radius-5 margin-10px-bottom text-white font-size16 xs-font-size13">' + Recip.item2 + '</span>'


                    let podzialka = Recip.item3.toString().split('.');
                    let cos = "I\\ " + podzialka[0]+ "\\." + podzialka[1];


                    var el = document.querySelector("#" + cos);

                    
                    if(el != null){
                        $("#" + Recip.item1).html("");
                    }
                });
            },
            error: function () {
                alert("COS zle");
            }
        });
    }






</script>